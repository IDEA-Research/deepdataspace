"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[397],{48348:function(jn,z,e){e.r(z),e.d(z,{default:function(){return Cn}});var L=e(52983),v=e(48815),U=e(17445),X=e(18288),k=e(17212),G=e(48638),K=e(19419),Q=e(6698),Y=e.n(Q),T=e(58174),$=e(89398),d=e(80455),E=e(32997),w=e(50024),q=e(14369),_=e(76388),nn=e(97379),O={fixMenu:"fixMenu___3BTI4",filter:"filter___f53Ll",rightFilters:"rightFilters___PcqUj",backBtn:"backBtn___zqjXV",dropBtn:"dropBtn___f3XQO"},n=e(97458),en=function(){var a=(0,v.useModel)("dataset.common",function(p){return{isTiledDiff:p.isTiledDiff,cloumnCount:p.pageState.cloumnCount,filters:p.pageData.filters,filterValues:p.pageState.filterValues,comparisons:p.pageState.comparisons}}),o=a.filters,i=a.filterValues,r=a.comparisons,f=a.isTiledDiff,g=a.cloumnCount,s=(0,v.useModel)("dataset.filters"),S=s.onCategoryChange,y=s.onDisplayOptionsChange,x=s.onDisplayAnnotationTypeChange,j=s.onLabelsChange,t=s.onLabelConfidenceChange,l=s.onLabelsDiffModeChange,B=s.onColumnCountChange,A=o.labels,N=i.selectedLabelIds,Z=i.displayAnnotationType===d.JJ.Matting,b=i.displayAnnotationType===d.JJ.KeyPoints;return(0,n.jsxs)("div",{className:O.fixMenu,id:"filterWrap",children:[(0,n.jsxs)("div",{className:O.filter,children:[(0,n.jsx)(T.ZP,{icon:(0,n.jsx)($.Z,{}),type:"text",className:O.backBtn,onClick:function(){return(0,E.yS)("/dataset")}}),(0,n.jsx)(w.Z,{categoryId:i.categoryId,categories:o.categories,onCategoryChange:S})]}),(0,n.jsxs)("div",{className:O.rightFilters,children:[(0,n.jsx)(q.Z,{showMatting:Z,showKeyPoints:b,isTiledDiff:f,labels:A,selectedLabelIds:N,diffMode:d.uP.Overlay,disableChangeDiffMode:!0,onLabelsChange:j,onLabelConfidenceChange:t,onLabelsDiffModeChange:l}),(0,n.jsx)(_.Z,{annotationTypes:o.annotationTypes,disableChangeType:!!r,displayAnnotationType:i.displayAnnotationType,displayOptions:o.displayOptions,displayOptionsValue:i.displayOptions,onDisplayAnnotationTypeChange:x,onDisplayOptionsChange:y}),!f&&(0,n.jsx)(nn.Z,{cloumnCount:g,onColumnCountChange:B})]})]})},an=en,tn=e(44580),on=e(29492),W=e(8671),ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},sn=ln,rn=e(31680),V=function(a,o){return L.createElement(rn.Z,(0,W.Z)((0,W.Z)({},a),{},{ref:o,icon:sn}))};V.displayName="SyncOutlined";var dn=L.forwardRef(V),H=e(31590),C=e(26237),h={toolsBar:"toolsBar___BaJ18",selector:"selector___oykI4",antiBtn:"antiBtn___BMNv_",flagTip:"flagTip___jQeUr",flag:"flag___AuDg7",flagBtn:"flagBtn___kI5rw",rightContent:"rightContent___J7I4T",lineSplit:"lineSplit___cRXnA"},gn=e(4689),cn=function(){var a,o=(0,v.useModel)("dataset.common",function(t){var l;return{pageSize:t.pageState.pageSize,flagStatus:(l=t.pageState.flagTools)===null||l===void 0?void 0:l.flagStatus,flagTools:t.pageState.flagTools&&t.pageData.flagTools}}),i=o.flagTools,r=o.flagStatus,f=o.pageSize,g=(0,v.useModel)("dataset.flag"),s=g.onChangeFlagStatus,S=g.changeSelectAll,y=g.antiSelect,x=g.saveFlag,j=g.updateOrder;return i?(0,n.jsxs)("div",{className:h.toolsBar,children:[(0,n.jsxs)("div",{className:h.selector,children:[(0,n.jsx)(tn.Z,{indeterminate:i.count>0&&i.count!==f,checked:(i==null?void 0:i.count)===f,onChange:S,children:i.count===0?(0,n.jsx)(C.Og,{id:"lab.toolsBar.selectAll"}):(0,n.jsx)(C.Og,{id:"lab.toolsBar.selectSome",values:{num:i.count}})}),(0,n.jsx)(T.ZP,{onClick:function(){return y()},className:h.antiBtn,children:(0,n.jsx)(C.Og,{id:"lab.toolsBar.selectInvert"})}),(0,n.jsxs)(gn.Z,{data:d.j3,value:r,filterOptionName:function(l){return l.name},filterOptionValue:function(l){return l.value},onChange:function(l){return s(l)},ghost:!1,type:"default",className:h.antiBtn,children:[(0,n.jsx)(C.Og,{id:"lab.toolsBar.filter"})," :"," ",(a=d.j3.find(function(t){return t.value===r}))===null||a===void 0?void 0:a.name]}),(0,n.jsxs)("div",{className:h.flagTip,children:[(0,n.jsx)(C.Og,{id:"lab.toolsBar.saveAs"}),"\uFF1A"]}),d.YC.map(function(t){return(0,n.jsx)(on.Z,{placement:"bottom",title:t.tip,children:(0,n.jsx)(T.ZP,{ghost:!0,onClick:function(){return x(t.value)},className:h.flagBtn,style:{borderColor:d.a5[t.value],opacity:i.count<=0?.5:1},icon:(0,n.jsx)(H.r,{fill:d.a5[t.value]})})},t.value)})]}),(0,n.jsx)("div",{className:h.rightContent,children:(0,n.jsxs)(T.ZP,{onClick:j,children:[(0,n.jsx)(dn,{}),(0,n.jsx)(C.Og,{id:"lab.toolsBar.updateOrder"})]})})]}):null},un=cn,fn=e(39712),pn=e(39949),c={page:"page___gO_hp",container:"container___ZoYU1",item:"item___gLaMX",itemImgWrap:"itemImgWrap___I92CG",flagIcon:"flagIcon___snhaL",label:"label___m8WJS",itemSelectedMask:"itemSelectedMask___oYwMk",pagination:"pagination___Z13Xp",editor:"editor___ZxT8b",pageSpin:"pageSpin___kIm_a"},hn=e(19950),vn=function(){var a=(0,v.useModel)("dataset.common"),o=a.pageState,i=a.onInitPageState,r=a.pageData,f=a.loading,g=a.displayLabelIds,s=a.isTiledDiff,S=a.displayOptionsResult,y=a.onPageContentLoaded,x=a.onPreviewIndexChange,j=a.exitPreview,t=a.renderAnnotationImage,l=(0,v.useModel)("Lab.FlagTool.model"),B=l.onPageDidMount,A=l.onPageWillUnmount,N=l.clickItem,Z=l.doubleClickItem,b=l.onPageChange,p=l.onPageSizeChange,mn=o.cloumnCount,Sn=o.isSingleAnnotation,yn=o.filterValues,F=o.flagTools;(0,U.Z)({onPageDidMount:B,onPageWillUnmount:A,onInitPageState:i,pageState:o});var M=(0,hn.Z)(function(){return document.querySelector(".ant-pro-page-container")}),J=M!=null&&M.width?M.width-80:0,P=(0,L.useMemo)(function(){return s?(0,pn.JC)(r.imgList,g,yn.displayAnnotationType):r.imgList},[s,r.imgList,g]),R=s?P.length/(r.imgList.length||1):mn,m=J?(J-16*(R-1))/(R||1):0;return(0,n.jsxs)(X._z,{ghost:!0,className:c.page,pageHeaderRender:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(an,{}),(0,n.jsx)(un,{})]})},fixedHeader:!0,children:[(0,n.jsx)("div",{className:c.container,children:(0,n.jsx)(k.ZP,{loading:f,children:P.length?(0,n.jsx)(Y(),{options:{gutter:16,horizontalOrder:!0,transitionDuration:0},onImagesLoaded:function(){return y()},children:P.map(function(u,I){return(0,n.jsxs)("div",{className:c.item,style:{width:m},onClick:function(){return N(I)},onDoubleClick:function(){return Z(I)},children:[(0,n.jsx)("div",{className:c.itemImgWrap,style:{width:m,height:F?m*3/4:"auto"},children:t({wrapWidth:m,wrapHeight:F?m*3/4:void 0,minHeight:m*3/4,data:u})}),u.flag>0&&(0,n.jsx)(H.r,{fill:d.a5[u.flag],className:c.flagIcon}),S.showImgDesc&&(0,n.jsxs)("div",{className:c.label,children:[" ",u.desc," "]}),F&&u.selected?(0,n.jsx)("div",{className:c.itemSelectedMask}):null]},"".concat(u.id,"_").concat(I))})}):null})}),!f&&(0,n.jsx)("div",{className:c.pagination,children:(0,n.jsx)(G.Z,{current:o.page,pageSize:o.pageSize,total:r.total,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:d.XM,onChange:function(I){return b(I)},onShowSizeChange:p})}),(0,n.jsx)(fn.Z,{visible:o.previewIndex>=0&&!Sn,onClose:j,list:P,current:o.previewIndex,onCurrentChange:x,renderAnnotationImage:t}),r.screenLoading?(0,n.jsx)("div",{className:c.pageSpin,children:(0,n.jsx)(K.Z,{spinning:!0,tip:r.screenLoading})}):null]})},Cn=vn}}]);
