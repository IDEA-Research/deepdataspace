"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[33],{40136:function(Oe,J,n){n.r(J),n.d(J,{default:function(){return Ie}});var P=n(52983),y=n(48815),Q=n(17445),k=n(18288),q=n(17212),_=n(48638),ee=n(19419),ae=n(6698),ne=n.n(ae),z=n(58174),te=n(89398),R=n(8671),se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M956 686.5l-.1-.1-.1-.1C911.7 593 843.4 545 752.5 545s-159.2 48.1-203.4 141.3v.1a42.92 42.92 0 000 36.4C593.3 816 661.6 864 752.5 864s159.2-48.1 203.4-141.3c5.4-11.5 5.4-24.8.1-36.2zM752.5 800c-62.1 0-107.4-30-141.1-95.5C645 639 690.4 609 752.5 609c62.1 0 107.4 30 141.1 95.5C860 770 814.6 800 752.5 800z"}},{tag:"path",attrs:{d:"M697 705a56 56 0 10112 0 56 56 0 10-112 0zM136 232h704v253h72V192c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v520c0 17.7 14.3 32 32 32h352v-72H136V232z"}},{tag:"path",attrs:{d:"M724.9 338.1l-36.8-36.8a8.03 8.03 0 00-11.3 0L493 485.3l-86.1-86.2a8.03 8.03 0 00-11.3 0L251.3 543.4a8.03 8.03 0 000 11.3l36.8 36.8c3.1 3.1 8.2 3.1 11.3 0l101.8-101.8 86.1 86.2c3.1 3.1 8.2 3.1 11.3 0l226.3-226.5c3.2-3.1 3.2-8.2 0-11.3z"}}]},name:"fund-view",theme:"outlined"},ie=se,le=n(31680),$=function(l,o){return P.createElement(le.Z,(0,R.Z)((0,R.Z)({},l),{},{ref:o,icon:ie}))};$.displayName="FundViewOutlined";var oe=P.forwardRef($),f=n(80455),re=n(32997),de=n(50024),ce=n(14369),ue=n(76388),pe=n(97379),U=n(26237),N={fixMenu:"fixMenu___sFkoc",filter:"filter___YLCNA",rightFilters:"rightFilters___ciVMw",backBtn:"backBtn___czLrv",dropBtn:"dropBtn___dmpsD"},e=n(97458),ge=function(){var l=(0,U.bU)(),o=l.localeText,p=(0,y.useModel)("dataset.common",function(a){return{isTiledDiff:a.isTiledDiff,cloumnCount:a.pageState.cloumnCount,filters:a.pageData.filters,filterValues:a.pageState.filterValues,comparisons:a.pageState.comparisons}}),s=p.filters,d=p.filterValues,i=p.comparisons,c=p.isTiledDiff,M=p.cloumnCount,g=(0,y.useModel)("dataset.filters"),u=g.onCategoryChange,j=g.onDisplayOptionsChange,v=g.onDisplayAnnotationTypeChange,h=g.onLabelsChange,T=g.onLabelConfidenceChange,I=g.onLabelsDiffModeChange,b=g.onColumnCountChange,C=(0,y.useModel)("dataset.comparisons"),O=C.openAnalysisModal,L=s.labels,A=d.selectedLabelIds,Z=d.displayAnnotationType===f.JJ.Matting,V=d.displayAnnotationType===f.JJ.KeyPoints;return(0,e.jsxs)("div",{className:N.fixMenu,id:"filterWrap",children:[(0,e.jsxs)("div",{className:N.filter,children:[(0,e.jsx)(z.ZP,{icon:(0,e.jsx)(te.Z,{}),type:"text",className:N.backBtn,onClick:function(){return(0,re.yS)("/dataset")}}),(0,e.jsx)(de.Z,{categoryId:d.categoryId,categories:s.categories,onCategoryChange:u})]}),(0,e.jsxs)("div",{className:N.rightFilters,children:[i?null:(0,e.jsx)(ce.Z,{showMatting:Z,showKeyPoints:V,isTiledDiff:c,labels:L,selectedLabelIds:A,diffMode:d.diffMode,onLabelsChange:h,onLabelConfidenceChange:T,onLabelsDiffModeChange:I}),(0,e.jsx)(ue.Z,{annotationTypes:s.annotationTypes,disableChangeType:!!i,displayAnnotationType:d.displayAnnotationType,displayOptions:s.displayOptions,displayOptionsValue:d.displayOptions,onDisplayAnnotationTypeChange:v,onDisplayOptionsChange:j}),i?null:(0,e.jsxs)(z.ZP,{className:N.dropBtn,type:"primary",onClick:O,children:[(0,e.jsx)(oe,{}),o("dataset.detail.analysis")]}),!c&&(0,e.jsx)(pe.Z,{cloumnCount:M,onColumnCountChange:b})]})]})},fe=ge,ve=n(88205),he=n.n(ve),G=n(4137),me=n(73974),Ce=n(76701),xe=n(56084),D=n(44580),ye=n(80267),E=n(4689),r={tools:"tools___Ug3Ea",title:"title____AI54",optionsTitle:"optionsTitle___sroju",vsText:"vsText___dPKn_",vs:"vs___zpup3",splitLine:"splitLine___SWsIk",splitLineLeft:"splitLineLeft___gVvN2",toolsBar:"toolsBar___SS4ub",text:"text___TLeEl",selector:"selector___rNXkx",scoreSlider:"scoreSlider___Dmu_I",slider:"slider___TbBwi",displayBar:"displayBar___iGMj2",anlysisModal:"anlysisModal___IPNpO"},K=n(77181),je=function(){var l,o,p=(0,U.bU)(),s=p.localeText,d=(0,y.useModel)("dataset.common",function(a){return{comparisons:a.pageState.comparisons,labels:a.pageData.filters.labels}}),i=d.comparisons,c=d.labels,M=(0,P.useState)(void 0),g=he()(M,2),u=g[0],j=g[1],v=(0,y.useModel)("dataset.comparisons"),h=v.showAnalysisModal,T=v.closeAnalysisModal,I=v.compareLabelSet,b=v.exitComparisons,C=v.onFilterComparisonsPrecision,O=c.length>0&&c.find(function(a){return a.source===f.$j.gt})&&c.find(function(a){var t;return((t=a.comparePrecisions)===null||t===void 0?void 0:t.length)>0}),L=c.find(function(a){return a.source===f.$j.gt}),A=c.filter(function(a){var t;return((t=a.comparePrecisions)===null||t===void 0?void 0:t.length)>0}).map(function(a){return{value:a.id,label:a.name}}),Z=function(t){j(t)},V=function(){if(!O){G.ZP.warning(s("dataset.toAnalysis.unSupportWarn"));return}var t=c.find(function(F){return F.id===u});if(!u||!t){G.ZP.warning(s("dataset.toAnalysis.unSelectWarn"));return}T(),I(t)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(me.Z,{title:s("dataset.detail.analModal.title"),footer:[(0,e.jsx)(z.ZP,{type:"primary",onClick:V,children:s("dataset.detail.analModal.btn")},"analysis")],open:h,onCancel:T,children:(0,e.jsxs)("div",{className:r.anlysisModal,children:[(0,e.jsx)("div",{children:L==null?void 0:L.name}),(0,e.jsx)("div",{className:r.vs,children:"vs"}),(0,e.jsx)(Ce.Z,{placeholder:s("dataset.detail.analModal.select"),style:{width:240},onChange:Z,options:A,value:u})]})}),i&&(0,e.jsxs)("div",{className:r.tools,children:[(0,e.jsxs)("div",{className:r.toolsBar,children:[(0,e.jsxs)("div",{className:r.selector,children:[(0,e.jsxs)("div",{className:r.title,children:[s("dataset.detail.analModal.sort")," :"]}),(0,e.jsx)(E.Z,{data:f.J1,value:i.orderBy,filterOptionName:function(t){return t.name},filterOptionValue:function(t){return t.value},onChange:function(t){return C("orderBy",t)},ghost:!1,type:"default",children:(l=f.J1.find(function(a){return a.value===i.orderBy}))===null||l===void 0?void 0:l.name}),(0,e.jsx)("span",{className:r.text,children:"with Confidence Precision"}),(0,e.jsxs)(E.Z,{data:i.label.comparePrecisions,value:i.precision,filterOptionName:function(t){return"".concat(t.precision," (Threshold: ").concat((0,K.O)(t.threshold),")")},filterOptionValue:function(t){return t.precision},onChange:function(t){return C("precision",t)},ghost:!1,type:"default",children:[i.precision," (Threshold: ".concat((0,K.O)(((o=i.label.comparePrecisions.find(function(a){return a.precision===i.precision}))===null||o===void 0?void 0:o.threshold)||0),")")]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("span",{className:r.vsText,children:["GroundTruch ",(0,e.jsx)("span",{className:r.vs,children:"VS"})," ",i==null?void 0:i.label.name]}),(0,e.jsx)(z.ZP,{onClick:b,children:s("dataset.detail.analModal.exit")})]})]}),(0,e.jsxs)("div",{className:r.displayBar,children:[(0,e.jsxs)("div",{className:r.title,children:[s("dataset.detail.analModal.display")," :"]}),(0,e.jsx)(xe.ZP.Group,{options:f.Wp.map(function(a){return{label:"".concat(s(a)).concat(s("dataset.detail.analModal.diff")),value:a}}),onChange:function(t){return C("diffMode",t.target.value)},value:i.diffMode,optionType:"button"}),(0,e.jsx)("div",{className:r.splitLine}),(0,e.jsxs)(D.Z.Group,{value:i.displays,onChange:function(t){return C("displays",t)},children:[(0,e.jsx)("span",{className:r.optionsTitle,children:"GroundTruth :"}),(0,e.jsx)(D.Z,{value:f.$j.gt,children:"Matched"}),(0,e.jsx)(D.Z,{value:f.BP.fn,children:"FN"}),(0,e.jsx)("div",{className:r.splitLineLeft}),(0,e.jsx)("span",{className:r.optionsTitle,children:"Prediction :"}),(0,e.jsx)(D.Z,{value:f.$j.pred,children:"Matched"}),(0,e.jsx)(D.Z,{value:f.BP.fp,children:"FP"})]}),(0,e.jsx)("div",{className:r.splitLineLeft}),(0,e.jsxs)("div",{className:r.scoreSlider,children:["Confidence threshold:",(0,e.jsx)(ye.Z,{className:r.slider,min:0,max:1,value:i.score,step:.01,onChange:function(t){return C("score",t)}})]})]})]})]})},Me=je,X=n(39949),w={toolsBar:"toolsBar___YbUXd",name:"name___QVqrS",vs:"vs___xuWpM"},Le=function(l){var o=l.itemWidth,p=(0,y.useModel)("dataset.common",function(u){return{selectedLabelIds:u.pageState.filterValues.selectedLabelIds,displayAnnotationType:u.pageState.filterValues.displayAnnotationType,labels:u.pageData.filters.labels,comparisons:u.pageState.comparisons,isTiledDiff:u.isTiledDiff}}),s=p.comparisons,d=p.isTiledDiff,i=p.labels,c=p.selectedLabelIds,M=p.displayAnnotationType;if(s||c.length<=1)return null;var g=(0,X.WR)(i,c,M);return(0,e.jsx)("div",{className:w.toolsBar,children:g.map(function(u,j){return(0,e.jsxs)(P.Fragment,{children:[!d&&j>0&&(0,e.jsx)("span",{className:w.vs,children:"VS"}),(0,e.jsx)("span",{className:w.name,style:{width:d&&j+1!==g.length?o:"auto"},children:u.name})]},u.id)})})},Se=Le,Te=n(39712),Pe=n(31590),m={page:"page___O9xsN",container:"container___rArHW",item:"item___aq9kP",itemImgWrap:"itemImgWrap___IaXgL",flagIcon:"flagIcon___Cm6rw",label:"label___spqGh",itemSelectedMask:"itemSelectedMask___CHtC_",pagination:"pagination___VE_pg",editor:"editor___Nl4nr",pageSpin:"pageSpin___zzy9v"},Ne=n(19950),De=function(){var l=(0,y.useModel)("dataset.common"),o=l.pageState,p=l.onInitPageState,s=l.pageData,d=l.loading,i=l.displayLabelIds,c=l.isTiledDiff,M=l.displayOptionsResult,g=l.onPageContentLoaded,u=l.onPreviewIndexChange,j=l.exitPreview,v=l.renderAnnotationImage,h=(0,y.useModel)("Dataset.model"),T=h.onPageDidMount,I=h.onPageWillUnmount,b=h.clickItem,C=h.doubleClickItem,O=h.onPageChange,L=h.onPageSizeChange,A=o.cloumnCount,Z=o.isSingleAnnotation,V=o.filterValues,a=o.flagTools;(0,Q.Z)({onPageDidMount:T,onPageWillUnmount:I,onInitPageState:p,pageState:o});var t=(0,Ne.Z)(function(){return document.querySelector(".ant-pro-page-container")}),F=t!=null&&t.width?t.width-80:0,H=(0,P.useMemo)(function(){return c?(0,X.JC)(s.imgList,i,V.displayAnnotationType):s.imgList},[c,s.imgList,i]),Y=c?H.length/(s.imgList.length||1):A,S=F?(F-16*(Y-1))/(Y||1):0;return(0,e.jsxs)(k._z,{ghost:!0,className:m.page,pageHeaderRender:function(){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(fe,{}),(0,e.jsx)(Me,{}),(0,e.jsx)(Se,{itemWidth:S+16})]})},fixedHeader:!0,children:[(0,e.jsx)("div",{className:m.container,children:(0,e.jsx)(q.ZP,{loading:d,children:H.length?(0,e.jsx)(ne(),{options:{gutter:16,horizontalOrder:!0,transitionDuration:0},onImagesLoaded:function(){return g()},children:H.map(function(x,B){return(0,e.jsxs)("div",{className:m.item,style:{width:S},onClick:function(){return b(B)},onDoubleClick:function(){return C(B)},children:[(0,e.jsx)("div",{className:m.itemImgWrap,style:{width:S,height:a?S*3/4:"auto"},children:v({wrapWidth:S,wrapHeight:a?S*3/4:void 0,minHeight:S*3/4,data:x})}),x.flag>0&&(0,e.jsx)(Pe.r,{fill:f.a5[x.flag],className:m.flagIcon}),M.showImgDesc&&(0,e.jsxs)("div",{className:m.label,children:[" ",x.desc," "]}),a&&x.selected?(0,e.jsx)("div",{className:m.itemSelectedMask}):null]},"".concat(x.id,"_").concat(B))})}):null})}),!d&&(0,e.jsx)("div",{className:m.pagination,children:(0,e.jsx)(_.Z,{current:o.page,pageSize:o.pageSize,total:s.total,showSizeChanger:!0,showQuickJumper:!0,pageSizeOptions:f.XM,onChange:function(B){return O(B)},onShowSizeChange:L})}),(0,e.jsx)(Te.Z,{visible:o.previewIndex>=0&&!Z,onClose:j,list:H,current:o.previewIndex,onCurrentChange:u,renderAnnotationImage:v}),s.screenLoading?(0,e.jsx)("div",{className:m.pageSpin,children:(0,e.jsx)(ee.Z,{spinning:!0,tip:s.screenLoading})}):null]})},Ie=De}}]);
